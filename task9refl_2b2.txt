Вариант решения приведен на примере списка, я же попробовал на примере иерархии классов.